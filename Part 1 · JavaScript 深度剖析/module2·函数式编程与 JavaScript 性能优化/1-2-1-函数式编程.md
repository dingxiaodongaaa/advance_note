<!--
 * @Descripttion: 
 * @version: 
 * @Author: dingxd
 * @Date: 2020-05-24 08:22:16
 * @LastEditors: dingxd
 * @LastEditTime: 2020-05-24 10:20:07
--> 
#### 为什么要学习函数式编程

- 函数式编程是随着React的流行受到越来越多的关注
- Vue 3也开始拥抱函数式编程
- 函数式编程可以抛弃this
- 打包过程中可以更好的利用tree shaking过滤无用代码
- 方便测试，方便并行处理
- 有很多库可以帮助我们进行函数式开发：lodash、undersore、ramda

#### 什么是函数式编程

函数式编程（Functional Programming，FP），FP是编程范式之一，我们常说的编程范式还有面向对象编程、面向过程编程。

- 面向对象编程的思维方式：把现实世界中的事物抽象成程序世界中的类和对象，通过封装、继承和多态来演示事物事件的联系

- 函数式编程的思维方式：把现实世界的事物和事件之间的联系抽象到程序世界（对运算过程进行抽象）

    - 程序的本质：根据输入通过某种运算获得相应的输出，程序开发过程中会涉及很多输入和输出的函数。
    
    - x -> f(联系、映射) -> y, y = f(x)

    - **函数式编程中的函数指的不是程序中的函数（方法）**，而是数学中的函数即映射关系，例如：**y = sin(x)**，x和y的关系

    - **相同的输入始终要得到相同的输出**（纯函数）

    - 函数式编程用来描述数据（函数）之间的映射

#### 前置知识

- 函数是一等公民
- 高阶函数
- 闭包

#### 函数是一等公民

[MDN First-class Function](https://developer.mozilla.org/zh-CN/docs/Glossary/First-class_Function)

- 函数可以存储在变量中
- 函数作为参数
- 函数作为返回值

在Javascript中**函数就是一个普通的对象**（可以通过`new Function()`），我们可以把函数存储到变量/数组中，它还可以作为另一个函数的参数或者返回值，甚至我们可以在程序运行的时候，通过`new Function('alert(1)')`来构造一个新的函数。

- 把函数赋值给变量

```javascript
// 把函数赋值给变量
let fn = function () {
    console.log('hello First-class Function')
}

// 一个示例
const BlogConstroller = {
    index (posts) { return Views.index(posts) },
    show (posts) { return Views.show(posts) },
    create (attrs) { return Db.create(attrs) },
    update (posts, attrs) { return Db.update(posts, attrs) },
    destroy (posts) { return Db.destroy(posts) },
}

// 优化
const BlogConstroller = {
    index: Views.index,
    show: Views.show,
    create: Db.create,
    update: Db.update,
    destroy: Db.destroy,
}
```

#### 高阶函数

- 高阶函数（Higher-order function）

    - 可以把函数作为参数传递给另一个函数
    - 可以把函数作为另一个函数的返回结果

- 函数作为参数

```javascript
// forEach
function forEach(Array, fn){
    for(let i = 0; i < Array.length; i++){
        fn(Array[i])
    }
}
const arr = [1, 2, 3, 4, 5, 6, 7, 8]
forEach(arr, function(item){
    console.log(item)
})

// filter
function filter(Array, fn){
    let arr = []
    for(let i = 0; i < Array.length; i++){
        if(fn(Array[i])){
            arr.push(Array[i])
        }
    }
    return arr
}
const arr = [1, 2, 3, 4, 5, 6, 7, 8]
let result = filter(arr, function(item){
    return item % 2 === 0
})
console.log(result)
```

- 函数作为返回值

```javascript
function makeFn () {
    const msg = "woailili"
    return function(){
        console.log(msg)
    }
}

// const fn = makeFn()
// fn()
makeFn()()

//once
function once (fn) {
    let done = false
    return function () {
        if(!done){
            done = true
            return fn.apply(this, arguments)
        }
    }
}
const pay = once(function (money) {
    console.log(`支付${money}元`)
})
pay(1)
// once函数是一个高阶函数，它接收一个函数作为参数，作用就是返回一个函数，返回的这个函数不管执行几次，它只会调用一次这个参数函数。
// 一句话说就是，生成一个只会执行一次的函数
```
