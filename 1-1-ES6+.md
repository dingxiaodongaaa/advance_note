# ES6+

## ES、JS概述

### 什么是ES？什么是JS？ES和JS之间的关系？

ECMAScript也是一门脚本语言，简写为ES，通常会把它看为JavaScript的标准化规范，事实上js是ES的扩展语言。ES只是单纯的语言，js是这门语言的扩展，使我们可以在浏览器中操作BOM和DOM；在node中可以去做读写文件的操作。

浏览器中的js就是ES+webAPI（即BOM和DOM）。

node中的js就是ES+nodeAPI（如fs、net、etc）。

### ES新特性

#### let与块级作用域、const

作用域：函数作用域、全局作用域、块级作用域（ES6新增）

- 函数作用域：变量在定义的函数体内以及函数体内嵌套的函数体中都是有定义的。
- 全局作用域：全局。
- 块级作用域：即{ }中间的区域，如if(){ }块、for(){ }块。

在ES6之后声明变量的关键字有三个var、let、const。

##### var和let和const
- var：函数作用域；变量声明提升；可以重复定义；声明的变量会作为window的属性。
- let：块级作用域；不会声明提升；不可以重复定义；不会作为window的属性。
- const：在let的基础上添加了只读（浅层只读，深层可读写）的属性。再声明的时候必须同时进行初始化。

编程建议：主用const、配合使用let，不用var。

##### var函数作用域及其它特性

通过下面的例子可以充分的体会var的函数作用域以及其他特性。

```
if(true){
    var a = 'xiaodong'
}
console.log(a) //xiaodong

for(var i = 0; i < 3; i++){
    for(var i = 0; i < 3; i++){
        console.log(i)
    }
}
//0,1,2
console.log(i) //4
```
通过if可以模拟一个for循环的过程,可以清晰的看到for循环的两层作用域。

##### let块级作用域及其它特性

```
if(true){
    let a = 'xiaodong'
}
console.log(a) //a is not defined
```

```
for(let i = 0; i < 3; i++){
    for(let i = 0; i < 3; i++){
        console.log(i)
    }
}//0 1 2 0 1 2 0 1 2
console.log(i) //i is not defined
```
##### let体会

```
var elements = [{}, {}, {}]
for(var i = 0; i < elements.length; i++){
    elements[i].onclick = function(){
        console.log(i)
    }
}
elements[0].onclick() //3

var elements = [{}, {}, {}]
for(let i = 0; i < elements.length; i++){
    elements[i].onclick = function(){
        console.log(i)
    }
}
elements[0].onclick() //0
```
##### let闭包实现

通过闭包的形式，将每一次传给函数的i作为这个函数执行时的依赖单独保存起来。

```
var elements = [{}, {}, {}]
for(var i = 0; i < elements.length; i++){
    elements[i].onclick = (function(i){
        console.log(i)
    })(i)
}
elements[0].onclick() //3
```

#### 解构

##### 数组解构

在应用的例子中体会解构的用法
1. 使用解构设置默认值，避免变量undefined

```
const [a=0, b=0] = [1];
console.log(a,b);//1,0
```
2. 使用解构交换两个变量的值

```
let [a, b] = [1, 2];//注意这里的省略号不能省略
[a, b] = [b ,a]
console.log(a, b)
```


##### 对象解构